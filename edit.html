<!DOCTYPE html>
<html>
  <head>
    <title>Edit Food Spot</title>
    <link rel="stylesheet" href="style.css" />
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="edit.js"></script>
    <style>
      /* ... existing styles ... */
    </style>
  </head>
  <body>
    // ... existing form ...
    <script>
      // Load the food spot data when the page loads
      document.addEventListener('DOMContentLoaded', () => {
        const foodSpot = JSON.parse(localStorage.getItem('editingFoodSpot'));
        if (foodSpot) {
          document.getElementById('name').value = foodSpot.name;
          document.getElementById('street').value = foodSpot.address.street;
          document.getElementById('city').value = foodSpot.address.city;
          document.getElementById('state').value = foodSpot.address.state;
          document.getElementById('zip').value = foodSpot.address.zip;
          document.getElementById('category').value = foodSpot.category;
          document.getElementById('rating').value = foodSpot.rating;
          document.getElementById('imageURL').value = foodSpot.imageURL;
        }
      });

      function saveChanges(event) {
        event.preventDefault();
        
        const foodSpot = {
          name: document.getElementById('name').value,
          address: {
            street: document.getElementById('street').value,
            city: document.getElementById('city').value,
            state: document.getElementById('state').value,
            zip: document.getElementById('zip').value
          },
          category: document.getElementById('category').value,
          rating: parseFloat(document.getElementById('rating').value),
          visited: JSON.parse(localStorage.getItem('editingFoodSpot')).visited,
          imageURL: document.getElementById('imageURL').value
        };

        // Get the current list from localStorage
        let foodSpotsList = JSON.parse(localStorage.getItem('foodSpotsList')) || [];
        
        // Update the food spot in the list
        const index = foodSpotsList.findIndex(spot => spot.name === foodSpot.name);
        if (index > -1) {
          foodSpotsList[index] = foodSpot;
        }

        // Save the updated list back to localStorage
        localStorage.setItem('foodSpotsList', JSON.stringify(foodSpotsList));

        // Clear the editing data and return to the main page
        localStorage.removeItem('editingFoodSpot');
        window.location.href = 'index.html';
      }
    </script>
  </body>
</html>